let mappings = {
  "Africa/Algiers": "West Central Africa",
  "Africa/Cairo": "Cairo",
  "Africa/Casablanca": "Casablanca",
  "Africa/Harare": "Harare",
  "Africa/Johannesburg": "Pretoria",
  "Africa/Monrovia": "Monrovia",
  "Africa/Nairobi": "Nairobi",
  "America/Argentina/Buenos_Aires": "Buenos Aires",
  "America/Bogota": "Bogota",
  "America/Caracas": "Caracas",
  "America/Chicago": "Central Time (US & Canada)",
  "America/Chihuahua": "Chihuahua",
  "America/Denver": "Mountain Time (US & Canada)",
  "America/Godthab": "Greenland",
  "America/Guatemala": "Central America",
  "America/Guyana": "Georgetown",
  "America/Halifax": "Atlantic Time (Canada)",
  "America/Indiana/Indianapolis": "Indiana (East)",
  "America/Juneau": "Alaska",
  "America/La_Paz": "La Paz",
  "America/Lima": "Lima",
  "America/Los_Angeles": "Pacific Time (US & Canada)",
  "America/Mazatlan": "Mazatlan",
  "America/Mexico_City": "Mexico City",
  "America/Monterrey": "Monterrey",
  "America/Montevideo": "Montevideo",
  "America/New_York": "Eastern Time (US & Canada)",
  "America/Phoenix": "Arizona",
  "America/Regina": "Saskatchewan",
  "America/Santiago": "Santiago",
  "America/Sao_Paulo": "Brasilia",
  "America/St_Johns": "Newfoundland",
  "America/Tijuana": "Tijuana",
  "Asia/Almaty": "Almaty",
  "Asia/Baghdad": "Baghdad",
  "Asia/Baku": "Baku",
  "Asia/Bangkok": "Bangkok",
  "Asia/Chongqing": "Chongqing",
  "Asia/Colombo": "Sri Jayawardenepura",
  "Asia/Dhaka": "Dhaka",
  "Asia/Hong_Kong": "Hong Kong",
  "Asia/Irkutsk": "Irkutsk",
  "Asia/Jakarta": "Jakarta",
  "Asia/Jerusalem": "Jerusalem",
  "Asia/Kabul": "Kabul",
  "Asia/Kamchatka": "Kamchatka",
  "Asia/Karachi": "Karachi",
  "Asia/Kathmandu": "Kathmandu",
  "Asia/Kolkata": "Mumbai",
  "Asia/Krasnoyarsk": "Krasnoyarsk",
  "Asia/Kuala_Lumpur": "Kuala Lumpur",
  "Asia/Kuwait": "Kuwait",
  "Asia/Magadan": "Magadan",
  "Asia/Muscat": "Abu Dhabi",
  "Asia/Novosibirsk": "Novosibirsk",
  "Asia/Rangoon": "Rangoon",
  "Asia/Riyadh": "Riyadh",
  "Asia/Seoul": "Seoul",
  "Asia/Shanghai": "Beijing",
  "Asia/Singapore": "Singapore",
  "Asia/Srednekolymsk": "Srednekolymsk",
  "Asia/Taipei": "Taipei",
  "Asia/Tashkent": "Tashkent",
  "Asia/Tbilisi": "Tbilisi",
  "Asia/Tehran": "Tehran",
  "Asia/Tokyo": "Tokyo",
  "Asia/Ulaanbaatar": "Ulaanbaatar",
  "Asia/Urumqi": "Urumqi",
  "Asia/Vladivostok": "Vladivostok",
  "Asia/Yakutsk": "Yakutsk",
  "Asia/Yekaterinburg": "Ekaterinburg",
  "Asia/Yerevan": "Yerevan",
  "Atlantic/Azores": "Azores",
  "Atlantic/Cape_Verde": "Cape Verde Is.",
  "Atlantic/South_Georgia": "Mid-Atlantic",
  "Australia/Adelaide": "Adelaide",
  "Australia/Brisbane": "Brisbane",
  "Australia/Darwin": "Darwin",
  "Australia/Hobart": "Hobart",
  "Australia/Melbourne": "Melbourne",
  "Australia/Perth": "Perth",
  "Australia/Sydney": "Sydney",
  "Etc/UTC": "UTC",
  "Europe/Amsterdam": "Amsterdam",
  "Europe/Athens": "Athens",
  "Europe/Belgrade": "Belgrade",
  "Europe/Berlin": "Berlin",
  "Europe/Bratislava": "Bratislava",
  "Europe/Brussels": "Brussels",
  "Europe/Bucharest": "Bucharest",
  "Europe/Budapest": "Budapest",
  "Europe/Copenhagen": "Copenhagen",
  "Europe/Dublin": "Dublin",
  "Europe/Helsinki": "Helsinki",
  "Europe/Istanbul": "Istanbul",
  "Europe/Kaliningrad": "Kaliningrad",
  "Europe/Kiev": "Kyiv",
  "Europe/Lisbon": "Lisbon",
  "Europe/Ljubljana": "Ljubljana",
  "Europe/London": "London",
  "Europe/Madrid": "Madrid",
  "Europe/Minsk": "Minsk",
  "Europe/Moscow": "Moscow",
  "Europe/Paris": "Paris",
  "Europe/Prague": "Prague",
  "Europe/Riga": "Riga",
  "Europe/Rome": "Rome",
  "Europe/Samara": "Samara",
  "Europe/Sarajevo": "Sarajevo",
  "Europe/Skopje": "Skopje",
  "Europe/Sofia": "Sofia",
  "Europe/Stockholm": "Stockholm",
  "Europe/Tallinn": "Tallinn",
  "Europe/Vienna": "Vienna",
  "Europe/Vilnius": "Vilnius",
  "Europe/Volgograd": "Volgograd",
  "Europe/Warsaw": "Warsaw",
  "Europe/Zagreb": "Zagreb",
  "Europe/Zurich": "Zurich",
  "Pacific/Apia": "Samoa",
  "Pacific/Auckland": "Auckland",
  "Pacific/Chatham": "Chatham Is.",
  "Pacific/Fakaofo": "Tokelau Is.",
  "Pacific/Fiji": "Fiji",
  "Pacific/Guadalcanal": "Solomon Is.",
  "Pacific/Guam": "Guam",
  "Pacific/Honolulu": "Hawaii",
  "Pacific/Majuro": "Marshall Is.",
  "Pacific/Midway": "Midway Island",
  "Pacific/Noumea": "New Caledonia",
  "Pacific/Pago_Pago": "American Samoa",
  "Pacific/Port_Moresby": "Port Moresby",
  "Pacific/Tongatapu": "Nuku'alofa",
};
let browserTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
let railsTimeZone = mappings[browserTimeZone];
let encodedTimeZone = encodeURIComponent(railsTimeZone);

// Find every anchor tag with a `data-infer-timezone` attribute of `true` and
// add the browser's current timezone as a query param to the link.
export default function inferTimezone(nodes) {
  if (railsTimeZone) {
    nodes.querySelectorAll("a[data-infer-timezone='true']").forEach(function (element) {
      element.href = element.href + `?time_zone=${encodedTimeZone}`;
    });
  }
}
